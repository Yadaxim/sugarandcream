(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.count=function(){return this.length},Array.prototype.empty=function(){return 0===this.length},Array.prototype.head=function(){return this[0]},Array.prototype.tail=function(){return Array.prototype.slice.call(this,1)},Array.prototype.clean=function(){return this.filter(function(t){return t})},Array.prototype.cleanMap=function(t){return this.map(t).clean()},Array.prototype.transpose=function(t,e){var n;return this.length<t+1||this.length<e+1?this:(n=this[t],this[t]=this[e],this[e]=n,this.splice(this.length,0),this)},Array.prototype.shuffle=function(){var t,e,n,r,o;for(t=n=r=this.length-1;1>=r?1>=n:n>=1;t=1>=r?++n:--n)e=Math.floor(Math.random()*(t+1)),o=[this[e],this[t]],this[t]=o[0],this[e]=o[1];return this},Array.prototype.unique=function(){var t,e,n,r,o;for(n=new Object,t=e=0,r=this.length;r>=0?r>e:e>r;t=r>=0?++e:--e)n[this[t]]=this[t];return function(){var e;e=[];for(t in n)o=n[t],e.push(o);return e}()},Array.prototype.uniqueBy=function(t){var e,n,r,o,i,a,s;for(o=new Object,n=r=0,i=this.length;i>=0?i>r:r>i;n=i>=0?++r:--r)o[this[n][t]]=this[n];a=[];for(e in o)s=o[e],a.push(s);return a},Array.prototype.difference=function(e){return this.filter(function(n){return t.call(e,n)<0})},Array.prototype.differenceBy=function(e,n){var r;return r=e.pluck(n),this.filter(function(e){var o;return o=e[n],t.call(r,o)<0})},Array.prototype.intersection=function(e){return this.filter(function(n){return t.call(e,n)>=0})},Array.prototype.intersectionBy=function(e,n){var r;return r=e.pluck(n),this.filter(function(e){var o;return o=e[n],t.call(r,o)>=0})},Array.prototype.union=function(t){return this.difference(t).concat(t)},Array.prototype.unionBy=function(t,e){return this.differenceBy(t,e).concat(t)},Array.prototype.humanPrint=function(t,e,n){var r,o;return n=n||void 0,0===this.length?n:1===this.length?this[0]:(o=this.slice(-1)[0],r=this.slice(0,-1).join((t||",")+" "),r+(" "+(e||"&")+" ")+o)},Array.prototype.filterBy=function(t,e){return this.filter(function(n){return n[t]===e})},Array.prototype.firstBy=function(t,e){var n,r,o;for(r=0,o=this.length;o>r;r++)if(n=this[r],n[t]===e)return n},Array.prototype.firstById=function(t){return this.firstBy("id",t)},Array.prototype.findFirstByFn=function(t,e){var n,r,o;for(r=0,o=this.length;o>r;r++)if(n=this[r],e(n)===t)return n},Array.prototype.remove=function(t){var e,n,r,o;for(n=r=0,o=this.length;o>r;n=++r)if(e=this[n],e===t)return this.splice(n,1)},Array.prototype.removeBy=function(t,e){var n,r,o,i;for(r=o=0,i=this.length;i>o;r=++o)if(n=this[r],n[t]===e)return this.splice(r,1)},Array.prototype.removeFirstByFn=function(t,e){var n,r,o,i;for(r=o=0,i=this.length;i>o;r=++o)if(n=this[r],e(n)===t)return this.splice(r,1)},Array.prototype.sortBy=function(t,e,n){var r;return r=function(){var r;return r=n?function(e){return n(e[t])}:function(e){return e[t]},function(t,n){var o,i;return o=r(t),i=r(n),[-1,1][+!!e]*((o>i)-(i>o))}},this.sort(r())},Array.prototype.sortByFn=function(t,e){return this.sort(function(n,r){var o,i;return o=e(n),i=e(r),[-1,1][+!!t]*((o>i)-(i>o))})},Array.prototype.sortByMultiple=function(t){var e,n;return e=function(t,e,n,r){return r=r?1:-1,e[t]>n[t]?-1*r:e[t]<n[t]?1*r:0},n=function(t,n,r){var o,i;return function(){var a,s,u;for(u=[],a=0,s=r.length;s>a;a++)o=r[a],u.push(i=e(o,t,n));return u}()?i:0},this.sort(function(e,r){return n(e,r,t)})},Array.prototype.groupBy=function(t){var e,n,r,o;for(o=new Object,n=0,r=this.length;r>n;n++){if(e=this[n],"undefined"==typeof e[t])throw'AttributeError: Cannot read property "'+t+'" of '+e;o[e[t]]instanceof Array?o[e[t]].push(e):o[e[t]]=[e]}return o},Array.prototype.pluck=function(t){return this.map(function(e){return e[t]})},Array.prototype.sum=function(){return this.reduce(function(t,e){return t+e},0)},Array.prototype.chunk=function(t,e,n){var r,o,i,a,s,u,l,c,d,f,p;if(0===this.length)return this;for(f=t||function(t){return t},o=e||function(t){return t},s=n||function(t,e){return e},i=[],d=[],p=null,l=f(this.first()),a=function(t){return p=f(t),JSON.stringify(p)===JSON.stringify(l)?d.push(o(t)):(i.push(s(l,d)),l=p,d=[o(t)])},u=0,c=this.length;c>u;u++)r=this[u],a(r);return i.push(s(p,d)),i},Array.prototype.sample=function(t){return null==t&&(t=1),this.shuffle().slice(0,+t+1||9e9)},Array.prototype.chunkByN=function(t){var e;return e=this,[].concat.apply([],e.map(function(n,r){return r%t?[]:[e.slice(r,r+t)]}))},Array.prototype.toObj=function(){return this.map(function(t,e){return{n:t,i:e}})},Array.prototype.powerset=function(){var t,n,r,o,i;return 0===this.length?[[]]:(n=this[0],r=2<=this.length?e.call(this,1):[],i=r.powerset(),t=function(){var t,e,r;for(r=[],t=0,e=i.length;e>t;t++)o=i[t],r.push([n].concat(o));return r}().concat(i))},Array.prototype.sortedPowerset=function(t){return this.powerset().sortByFn(t,function(t){return t.length})},Array.prototype.flatten=function(){var t,e,n,r;for(e=[],n=0,r=this.length;r>n;n++)t=this[n],"[object Array]"===Object.prototype.toString.call(t)?e=e.concat(flatten(t)):e.push(t);return e}}).call(this),function(){$("#navbar-tools").find("a").each(function(t,e){var n;return n=$(e),n.attr("href")===window.location.pathname?n.remove():void 0}),window.bs={alert:function(t){return $("#alert-modal").unbind(),$('#alert-modal [bind="title"]').text(t.title||dictionary.alert),$('#alert-modal [bind="text"]').text(t.text),t.html&&$('#alert-modal [bind="text"]').html(t.html),$('#alert-modal [bind="confirm"]').text(t.confirm||dictionary.OK),$('#alert-modal [bind="confirm"]').addClass("btn-"+(t.confirm_btn_class||"default")),$("#alert-modal").modal("show"),$.isFunction(t.callback)?$("#alert-modal").on("hide.bs.modal",function(){return t.callback()}):void 0},confirm:function(t){return["#confirm-yes","#confirm-no"].forEach(function(t){return $(t).unbind()}),$('#confirm-modal [bind="title"]').text(t.title||dictionary.confirm),$('#confirm-modal [bind="text"]').text(t.text),t.html&&$('#confirm-modal [bind="text"]').html(t.html),"small"===t.size&&$("#confirm-modal .modal-dialog").addClass("modal-sm"),"large"===t.size&&$("#confirm-modal .modal-dialog").addClass("modal-lg"),t.text||t.html||$("#confirm-modal .modal-body").remove(),$('#confirm-modal [bind="confirm"]').text(t.confirm||dictionary.OK),$('#confirm-modal [bind="cancel"]').text(t.cancel||dictionary.cancel),$('#confirm-modal [bind="confirm"]').addClass("btn-"+(t.confirm_btn_class||"default")),$('#confirm-modal [bind="cancel"]').addClass("btn-"+(t.cancel_btn_class||"default")),$("#confirm-modal").modal("show"),$("#confirm-yes").on("click",function(){return $("#confirm-modal").modal("hide"),$.isFunction(t.callback)?t.callback():void 0}),$("#confirm-no").on("click",function(){return $("#confirm-modal").modal("hide")})},modal:function(t){var e,n,r,o,i,a,s,u,l,c,d,f,p,h;if(s=t.id,$("#"+s+"-modal").remove(),null==s)throw"bs.modal: Need an id";if(l=t.form,h=t.close!==!1?!0:void 0,i=t.header!==!1?!0:void 0,p=t.title,e=t.body||$("#"+s+"-modal-body").html(),o=t.footer||$("#"+s+"-modal-footer").html(),r=t.fade===!0?"fade":"",c="static"===(d=t.backdrop)||d===!0||d===!1?t.backdrop:!0,u=t.keyboard!==!1?!0:void 0,null!=i&&null==p)throw"bs.modal: If a hedear is to be set, a title is required.";return f=t.show||!1,n=t.destroy!==!1?!0:void 0,a="",a+="<div id='"+s+"-modal' class='modal "+r+"'",a+="data-keyboard='"+u+"'",a+="data-backdrop='"+c+"'",a+=">",a+="<div class='modal-dialog'>",a+="<div class='modal-content'>",null!=l&&(a+="<form id='"+s+"-modal-form'>"),null!=i&&(a+="<div class='modal-header'>",null!=h&&(a+="<button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>"),null!=p&&(a+="<h4 class='modal-title'>"+p+"</h4>"),a+="</div>"),null!=e&&(a+="<div class='modal-body'>"+e+"</div>"),null!=o&&(a+="<div class='modal-footer'>"+o+"</div>"),null!=l&&(a+="</form>"),a+="</div>",a+="</div>",a+="</div>",$("#content").append(a),f?$("#"+s+"-modal").modal("show"):void 0},tooltips:function(){return $('[bind="tooltip"]').tooltip({toggle:"tooltip",placement:"auto",delay:{show:150,hide:0}})},popovers:function(){return $('[data-toggle="popover"]').popover({toggle:"popover",html:"true",trigger:"hover",placement:"auto",delay:{show:150,hide:0}})},popovers_on:function(t){return bs.popovers_destroy(t),$(t+" [data-toggle='popover']").popover({toggle:"popover",html:"true",trigger:"hover",placement:"auto",delay:{show:150,hide:0}})},popovers_destroy:function(t){return $(t+" [data-toggle='popover']").popover("destroy")}}}.call(this),function(){Date.prototype.prettyHTML=function(t,e){var n,r,o,i,a;return t=t||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=e||["January","February","Mach","April","May","June","July","August","September","October","November","December"],n=new Date(this.getTime()+6e4*this.getTimezoneOffset()),o=e[n.getMonth()],r=n.getDate()<10?"&nbsp;"+n.getDate():""+n.getDate(),a=n.getFullYear(),i=t[n.getDay()].substr(0,3),"<span style='font-family: monospace'> "+o+" "+r+", "+a+" <span style='color: #aaaaaa'>("+i+")</span> </span>"},Date.prototype.standardDate=function(){var t,e,n;return e=this.getMonth()<9?"0"+(this.getMonth()+1):""+(this.getMonth()+1),t=this.getDate()<10?"0"+this.getDate():""+this.getDate(),n=this.getFullYear(),n+"-"+e+"-"+t},Date.prototype.standardDateTime=function(){var t,e,n,r,o;return r=this.getMonth()<9?"0"+(this.getMonth()+1):""+(this.getMonth()+1),t=this.getDate()<10?"0"+this.getDate():""+this.getDate(),e=this.getHours()<10?"0"+this.getHours():""+this.getHours(),n=this.getMinutes()<10?"0"+this.getMinutes():""+this.getMinutes(),o=this.getFullYear(),o+"-"+r+"-"+t+" "+e+":"+n},Date.prototype.fix_dashes=function(t){return t.replace(/(\d{4})-(\d{2})-(\d{2})/gi,"$1/$2/$3")}}.call(this),function(){null==window.location.getQueryParam&&(window.location.getQueryParam=function(t){var e,n,r;return e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(location.search),null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}),window.dictionary={},window.translator=function(t){var e,n,r,o;n=location.getQueryParam("lang")||localStorage.lang||"es",localStorage.lang=n,r=[];for(e in t)o=t[e],r.push(window.dictionary[e]=o[n]);return r},window.base_dictionary={cancel:{es:"Cancelar",en:"Cancel"},alert:{es:"Alerta",en:"Alert"},OK:{es:"OK",en:"OK"},error:{es:"Error",en:"Error"},weekdays:{es:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],en:["January","February","Mach","April","May","June","July","August","September","October","November","December"]},working:{es:"Trabajando...",en:"Working..."},file:{es:"Archivo",en:"File"},line:{es:"Línea",en:"Line"},js_error:{es:"Error de JS",en:"JS error"},js_error_message:{es:"Hubo un error en el navegador, por favor reporta los siguientes datos a un administrador.",en:"This is probably a bug on the browser, report the following details to an administrator."},almost:{es:"Casi",en:"Almost"},done:{es:"¡Listo!",en:"¡Done!"},clear:{es:"Limpiar",en:"Clear"},filetype_error_title:{es:"Tipo de archivo",en:"File type error"},filetype_error_message:{es:"Sólo se pueden subis los siguientes tipos de archivos:",en:"File is not in the accepted file types:"},filesize_error_title:{es:"Tamaño de archivo",en:"File size error"},filesize_error_message:{es:"¡El archivo es demasiado grande! El límite es: ",en:"File is too large! The limit is: "},and:{es:"y",en:"and"}},translator(window.base_dictionary)}.call(this),function(){$.fn.dropdown_matcher=function(t){var e,n,r,o,i,a;return e=this,o=function(e){return t.match_callback?utils.fnRun(t.match_callback,e):e.matches=!0},a=function(e){return t.unmatch_callback?utils.fnRun(t.unmatch_callback,e):e.matches=!1},r=function(e,n){return n.every(function(n){var r;return r=new RegExp(n.regExpEscape(),"i"),t.attributes.some(function(t){return e[t].split(" ").some(function(t){return r.test(t)})})})},n=function(t,e){var r;return t.removeClass("active"),r="up"===e?t.prev():t.next(),0===r.length?!1:r.is(":visible")?r.addClass("active"):n(r,e)},i=function(){return $(t.dropdown+" li").removeClass("active"),$(t.dropdown+" li:visible").first().addClass("active"),$(t.dropdown+" .too-many").hide(),$(t.dropdown+" .no-results").hide()},t.dropdown&&(e.blur(function(e){return setTimeout(function(){return $(t.dropdown).hide()},500)}),e.focus(function(t){return e.trigger("input")}),e.keydown(function(e){var r,o;switch(o=$(t.dropdown+" li.active"),r=o.first(),e.keyCode){case 13:return e.preventDefault(),r.find("a").click();case 38:return e.preventDefault(),0===o.length?$(t.dropdown+" li:visible").last().addClass("active"):n(r,"up");case 40:return e.preventDefault(),0===o.length?$(t.dropdown+" li:visible").first().addClass("active"):n(r,"down")}})),e.keydown(function(t){return 27===t.keycode?($(t.target).val(null),$(t.target).trigger("input")):void 0}),e.bind("input",function(){var n,s,u,l,c,d,f;if(d=e.val(),d.length>=(+t.min_char||1)){if(f=d.split(" "),n=0,t.collection.forEach(function(t){return r(t,f)?(o(t),n+=1):a(t)}),t.dropdown)switch(i(),!1){case 0!==d.length:return t.no_results?$(""+t.no_results).hide():$(".no-results").hide(),t.many_results?$(""+t.many_results).hide():$(".many-results").hide(),$(""+t.dropdown).hide();case!!n:return t.no_results?$(""+t.no_results).show():$(".no-results").show(),t.many_results?$(""+t.many_results).hide():$(".many-results").hide(),$(""+t.dropdown).hide();case!(n>(t.dropdown_size||10)):return t.no_results?$(""+t.no_results).hide():$(".no-results").hide(),t.many_results?$(""+t.many_results).show():$(".many-results").show(),$(""+t.dropdown).hide();default:return t.no_results?$(""+t.no_results).hide():$(".no-results").hide(),t.many_results?$(""+t.many_results).hide():$(".many-results").hide(),$(""+t.dropdown).show()}}else{for(c=t.collection,u=0,l=c.length;l>u;u++)s=c[u],a(s);if(t.dropdown)return i()}})}}.call(this),function(){var t,e,n,r={}.hasOwnProperty;e=function(t){var e,n,r,o,i;try{i=new String,o=JSON.parse(t);for(r in o)i+=r+": "+o[r]+" <br />";return i}catch(n){return e=n,t}},t=function(t){var e,n;try{return function(){var o,i;o=JSON.parse(t),i=[];for(e in o)r.call(o,e)&&(n=o[e],i.push(n+"<br />"));return i}().join("")}catch(o){return t}},window.flash={css:function(){return console.log("This is a sample CSS for this to look nicely: \n \n [bind='flash'] {\n opacity: 0.9;\n border-radius: 0 !important;\n }\n \n #js-error { margin: 100px !important; }\n \n #api-message-container {\n position: fixed;\n width: 100%;\n margin: auto;\n top: 15px;\n text-align: center;\n z-index: 9999;\n }\n \n #api-message-container > span.alert { padding: 16px; }\n #api-message-container > div.error { margin-top: -16px; }\n")},error:function(t){return $("#api-message-container").append("<div class='error alert alert-danger' bind='flash'><span bind='error-message'>"+t+"</span></div>")},success:function(t){return $('[bind="flash"]').remove(),$("#api-message-container").append("<span class='success alert alert-success' bind='flash'><span bind='message'>"+t+"</span></span>"),$('[bind="flash"]').delay(5e3).fadeOut("fast")},info:function(t){return $("#api-message-container").append("<span class='info alert alert-info' bind='flash'>"+t+"</span>")}},$(document).ajaxStart(function(){return $('[bind="flash"]').remove()}),n=void 0,$(document).ajaxSend(function(){return n?void 0:n=setTimeout(function(){return flash.info(dictionary.working)},20)}),$(document).ajaxSuccess(function(t,e,n){var r;return r=e.getResponseHeader("API-Message"),null!==r&&void 0!==r?flash.success(decodeURIComponent(escape(r))):void 0}),$(document).ajaxError(function(t,n,r,o){return 422===n.status?flash.error(e(n.responseText)):flash.error(e(n.status+": "+e(n.responseText)))}),$(document).ajaxComplete(function(t,e){return clearTimeout(n),n=void 0,$('[bind="flash"].info').remove()}),$(document).on("click","#api-message-container",function(){return $('[bind="flash"]').remove()}),window.onerror=function(t,e,n){return $('[bind="flash"].info').remove(),$("body").prepend("<div id='js-error' class='error alert alert-danger'> <p> <b>"+dictionary.js_error+"</b> "+dictionary.js_error_message+" </p> <p> "+dictionary.error+": "+t+"<br /> "+dictionary.file+":  "+e+"<br /> "+dictionary.line+":  "+n+" </p> </div>"),!1}}.call(this),function(){$.md5=md5,$.fn.toObject=function(t){var e;return null==t&&(t="name"),e=new Object,this.find("["+t+"]").each(function(n,r){var o,i;return o=$(r),i=o.attr(t),e[i]=function(){switch(o.attr("type")){case"password":return $.md5(o.val());case"checkbox":return o.is(":checked");case"number":return+o.val();default:return o.val()}}(),!0}),e},$.fn.fillIn=function(t,e){return null==e&&(e="name"),this.find("input, textarea").each(function(n,r){var o;return o=$(r).attr(e),o&&t[o]?$(r).val(t[o]):void 0}),this}}.call(this),function(){$.fuzzy_matcher=function(t){var e;return $(t.match_text_input).unbind(),e=function(t,n){var r;return t.removeClass("active"),r="up"===n?t.prev():t.next(),0===r.length?!1:r.is(":visible")?r.addClass("active"):e(r,n)},t.dropdown?($(t.match_text_input).focus(function(e){return $(t.match_text_input).trigger("input")}),$(t.match_text_input).keydown(function(n){var r,o;switch(o=$(t.dropdown+" li.active"),r=o.first(),n.keyCode){case 13:return n.preventDefault(),r.find("a").click();case 27:return $(n.target).val(null),$(n.target).trigger("input");case 38:return n.preventDefault(),0===o.length?$(t.dropdown+" li:visible").last().addClass("active"):e(r,"up");case 40:return n.preventDefault(),0===o.length?$(t.dropdown+" li:visible").first().addClass("active"):e(r,"down")}})):$(t.match_text_input).keydown(function(t){return 27===t.keycode?($(t.target).val(null),$(t.target).trigger("input")):void 0}),$(t.match_text_input).bind("input",function(){var e,n,r,o,i,a,s,u,l;return e=!0,a=!0,n=0,s=[],l=[],u=function(t,e){switch(e){case"fuzzy":return new RegExp(t.split("").map(function(t){return t.regExpEscape()}).join(".*?"),"i");case"sub":return new RegExp(""+t.regExpEscape(),"i");case"exact":return new RegExp("^"+t.regExpEscape(),"i")}},r=function(e,n){return""===n[0]?!0:n.every(function(n){var r;return r=u(n,t.search_mode||"fuzzy"),t.search_by_attributes.some(function(t){var o,i;return $.isFunction(t)&&(i=t(e))?(n.toLowerCase()===i.toLowerCase()&&s.push(e),r.test(i)):(o=e[t])?(n.toLowerCase()===o.toLowerCase()&&s.push(e),r.test(o)):!1})})},$.isFunction(t.extra_test)||(t.extra_test=function(t){return!0}),$.isFunction(t.or_test)||(t.or_test=function(t){return!1}),$(t.match_text_input).val().length>(+t.min_char||0)?(o=$(t.match_text_input).val().trim(),i=[o],t.search_in.forEach(function(o){return t.or_test(o)||r(o,i)&&t.extra_test(o)?(utils.fnRun(t.match_callback,o),a=!1,n+=1,l.push(o)):(utils.fnRun(t.unmatch_callback,o),e=!1)}),s.length&&n>+t.max_matches?$.isFunction(t.perfect_callback)?utils.fnRun(t.perfect_callback,n,o,l,s):utils.fnRun(t.many_callback,n,o,l):a?utils.fnRun(t.none_callback,o):n<=+t.max_matches&&(t.auto_show||!e||1===n)?utils.fnRun(t.some_callback,n,o,l):e?utils.fnRun(t.all_callback,n,o,l):n>+t.max_matches?utils.fnRun(t.many_callback,n,o,l):void 0):utils.fnRun(t.all_callback,t.search_in.length,$(t.match_text_input).val(),t.search_in)}),t.auto_trigger?$(t.match_text_input).trigger("input"):void 0}}.call(this),function(){$.each(["put","del"],function(t,e){return $[e]=function(t,n,r,o){return"del"===e&&(e="delete"),$.isFunction(n)&&(o=o||r,r=n,n=void 0),$.ajax({url:t,type:e,dataType:o,data:n,success:r})}})}.call(this),function(){window.location.getQueryParam=function(t){var e,n,r;return e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(location.search),null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},window.location.updateQueryParam=function(t,e){var n,r,o;return o=location.search,n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),r=-1!==o.indexOf("?")?"&":"?",o.match(n)?null===e?o.replace(n,""):o.replace(n,"$1"+t+"="+e+"$2"):""+o+r+t+"="+e}}.call(this),function(){navigator.sayswho=function(){var t,e,n;return n=navigator.userAgent,e=void 0,t=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(t[1])?(e=/\brv[ :]+(\d+)/g.exec(n)||[],"IE "+(e[1]||"")):"Chrome"===t[1]&&(e=n.match(/\b(OPR|Edge)\/(\d+)/),null!==e)?e.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=n.match(/version\/(\d+)/i))&&t.splice(1,1,e[1]),t.join(" "))}()}.call(this),function(){Number.prototype.toCurrency=function(){return"$"+this.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},Number.prototype.ms2coloquial=function(){var t,e,n,r,o;return t=864e5,n=this/t,n>356?(o=(n/356).toFixed(1))+(1===o?" year":" years"):n>30?(e=Math.round(n/30))+(1===e?" month":" months"):n>7?(r=Math.round(n/7))+(1===r?" week":" weeks"):Math.round(n)+(1===n?" day":" days")},Number.prototype.digits=function(){return 0===this?1:Math.floor(Math.log10(this)+1)}}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};Object.defineProperty(Object.prototype,"merge",{enumerable:!1,value:function(t){var e,n;for(e in t)n=t[e],this[e]=n;return this}}),Object.defineProperty(Object.prototype,"pick",{enumerable:!1,value:function(t){var e,n,r,o;for(o={},e=0,r=t.length;r>e;e++)n=t[e],o[n]=this[n];return o}}),Object.defineProperty(Object.prototype,"omit",{enumerable:!1,value:function(e){var n,r,o;r={};for(n in this)o=this[n],t.call(e,n)<0&&(r[n]=o);return r}})}.call(this),function(){var t,e,n,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e=function(t,e){return localStorage[t+"_version"]===n(e)},n=function(t){return session.versions.filter(function(e){var n;return n=e.n,r.call(t,n)>=0}).map(function(t){return t.f}).reduce(function(t,e){return t+e},0).toString()},window.sync=function(e,n){var r;return r=Date.now(),async.each(e.concat(sync_base),syncOne,function(e){return e?console.log("Sync Error!!"):(console.log("Sync Done! in "+(Date.now()-r)+" ms"),t(),n())})},window.public_sync=function(e,n){var r,o;return o=Date.now(),"undefined"!=typeof r&&null!==r||(r=new Object),async.each(e,syncOne,function(e){return e?console.log("Public Sync Error!!"):(console.log("Public Sync Done! in "+(Date.now()-o)+" ms"),t(),n())})},window.syncOne=function(t,r){var o,i,a,s,u,l;return u=Date.now(),a=t.name,s=sync_conf[a]&&sync_conf[a].related||t.related||[],l=sync_conf[a]&&sync_conf[a].url||t.url||"/api/"+a,i=sync_conf[a]&&sync_conf[a].fresh||t.fresh||!1,o=sync_conf[a]&&sync_conf[a].data||t.data||{},localStorage[a]&&e(a,s)?(session[a]=$.parseJSON(localStorage[a]),console.log("kept "+a+" in "+(Date.now()-u)+" ms"),r()):$.get(l,o,function(t){return i||(localStorage[a]=JSON.stringify(t)),i||(localStorage[a+"_version"]=n(s)),session[a]=t,console.log("got "+a+" in "+(Date.now()-u)+" ms"),r()})},t=function(){var t,e,n,r;n=0,e=function(e){var r;return r=t.length/1024/1024,n+=r};for(r in localStorage)t=localStorage[r],e(r);return console.log("LocalStorage Size = "+n.toFixed(1)+" MB ("+(n/.05).toFixed(1)+"%)")}}.call(this),function(){var t=[].slice;String.prototype.toBoolean=function(){return"true"===this.valueOf()?!0:"false"===this.valueOf()?!1:void 0},String.prototype.closest_in=function(t,e){if(("undefined"==typeof utils||null===utils)&&null==utils.levenshtein)throw Error("utils.levenshtein is not defined");return t.filter(function(t){return function(n){return utils.levenshtein(t,n)<=e}}(this))},String.prototype.capitalise=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.regExpEscape=function(){return this.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},String.prototype.format=function(){var e,n,r,o;for(e=1<=arguments.length?t.call(arguments,0):[],o=this,n=e.length;n;)n-=1,r=new RegExp("\\{"+n+"\\}","gm"),o=o.replace(r,e[n]);return o},String.prototype.camelise=function(){return this.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})},String.prototype.startsWith=function(t){return 0===this.lastIndexOf(t,0)},String.prototype.truncate=function(t){return this.length>t?this.slice(0,+t+1||9e9)+"...":this}}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};$.fn.uploadFile=function(e){var n,r,o,i,a,s,u,l,c,d,f,p,h,m,y,g,v,b;if(n=this,f=e.url,d=e.type||"POST",v=e.payload||{},c=e.max_size||4e6,m=e.extensions||[],p=e.extension_error||function(t,e){return bs.alert({title:dictionary.filetype_error_title,text:dictionary.filetype_error_message+" "+e.humanPrint(", ",dictionary.and)})},u=function(t){return null!=e.before&&e.before(t),$("#upload-progress").text("0%"),$("#upload-progress-modal").modal("show")},y=e.progress||function(t){return $("#upload-progress").text(function(){return"100%"===t?dictionary.almost+"...":t})},o=function(t){return null!=e.success&&e.success(t),$("#upload-progress").text(dictionary.done),$("#upload-progress-modal").modal("hide")},r=function(t,n,r){return 413===t.status&&$("#upload-progress").text(dictionary.file_too_large),e.error(t,n,r)},b=e.filesize_error||function(t){return bs.alert({title:dictionary.filesize_error_title,text:dictionary.filesize_error_message+" "+c})},s=new FormData,a=this[0].files[0],i=(a.name||a.fileName).split(".").pop().toLowerCase(),m.length&&t.call(m,i)<0)return p(i,m),!1;if(!a)return!1;h={error:$.noop,success:$.noop,start:$.noop,complete:$.noop},s.append(this.attr("name"),a);for(l in v)g=v[l],s.append(l,g);return $.ajax({type:d,url:f,data:s,cache:!1,contentType:!1,processData:!1,xhr:function(){var t;return t=$.ajaxSettings.xhr(),t.upload.onprogress=function(t){return y((t.loaded/t.total*100>>0)+"%")},t.onloadstart=function(){return h.start.apply(self)},t},beforeSend:function(t){return a.size>c?(t.abort(),b(a.size),!1):(t.setRequestHeader("X-XHR-Upload","1"),t.setRequestHeader("X-File-Name",a.name||a.fileName),t.setRequestHeader("X-File-Size",a.fileSize||a.size),u(t))},error:function(t,e,n){return r(t,e,n)},success:function(t){return o(t)}})}}.call(this),function(){var t,e=[].slice;t={fnRun:function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],"function"==typeof n?n.apply(void 0,t):void 0},levenshtein:function(t,e){var n,r,o,i,a,s,u,l,c,d,f,p,h,m,y,g,v,b;if(s=t.length,u=e.length,0===s)return u;if(0===u)return s;for(n=new Array,r=i=0,p=s;p>=0?p>=i:i>=p;r=p>=0?++i:--i){for(b=[],o=a=0,h=u;h>=0?h>=a:a>=h;o=h>=0?++a:--a)b.push(0);n.push(b)}for(r=l=1,m=s;m>=1?m>=l:l>=m;r=m>=1?++l:--l)n[r][0]=r;for(o=c=1,y=u;y>=1?y>=c:c>=y;o=y>=1?++c:--c)n[0][o]=o;for(o=d=1,g=u;g>=1?g>=d:d>=g;o=g>=1?++d:--d)for(r=f=1,v=s;v>=1?v>=f:f>=v;r=v>=1?++f:--f)t[r-1]===e[o-1]?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o]+1,n[r][o-1]+1,n[r-1][o-1]+1);return n[s][u]},charRange:function(t,e){var n,r,o;for(o=[],r=t.charCodeAt(0),n=e.charCodeAt(0);n>=r;)o.push(String.fromCharCode(r)),++r;return o}},"undefined"!=typeof global&&null!==global&&(global.utils=t),"undefined"!=typeof window&&null!==window&&(window.utils=t)}.call(this);