(function(){var t=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.count=function(){return this.length},Array.prototype.empty=function(){return 0===this.length},Array.prototype.head=function(){return this[0]},Array.prototype.tail=function(){return Array.prototype.slice.call(this,1)},Array.prototype.clean=function(){return this.filter(function(t){return t})},Array.prototype.cleanMap=function(t){return this.map(t).clean()},Array.prototype.transpose=function(t,e){var r;return this.length<t+1||this.length<e+1?this:(r=this[t],this[t]=this[e],this[e]=r,this.splice(this.length,0),this)},Array.prototype.shuffle=function(){var t,e,r,n,o;for(t=r=n=this.length-1;1>=n?1>=r:r>=1;t=1>=n?++r:--r)e=Math.floor(Math.random()*(t+1)),o=[this[e],this[t]],this[t]=o[0],this[e]=o[1];return this},Array.prototype.unique=function(){var t,e,r,n,o;for(r=new Object,t=e=0,n=this.length;n>=0?n>e:e>n;t=n>=0?++e:--e)r[this[t]]=this[t];return function(){var e;e=[];for(t in r)o=r[t],e.push(o);return e}()},Array.prototype.uniqueBy=function(t){var e,r,n,o,i,a,s;for(o=new Object,r=n=0,i=this.length;i>=0?i>n:n>i;r=i>=0?++n:--n)o[this[r][t]]=this[r];a=[];for(e in o)s=o[e],a.push(s);return a},Array.prototype.difference=function(e){return this.filter(function(r){return t.call(e,r)<0})},Array.prototype.differenceBy=function(e,r){var n;return n=e.pluck(r),this.filter(function(e){var o;return o=e[r],t.call(n,o)<0})},Array.prototype.intersection=function(e){return this.filter(function(r){return t.call(e,r)>=0})},Array.prototype.intersectionBy=function(e,r){var n;return n=e.pluck(r),this.filter(function(e){var o;return o=e[r],t.call(n,o)>=0})},Array.prototype.union=function(t){return this.difference(t).concat(t)},Array.prototype.unionBy=function(t,e){return this.differenceBy(t,e).concat(t)},Array.prototype.humanPrint=function(t,e,r){var n,o;return r=r||void 0,0===this.length?r:1===this.length?this[0]:(o=this.slice(-1)[0],n=this.slice(0,-1).join((t||",")+" "),n+(" "+(e||"&")+" ")+o)},Array.prototype.filterBy=function(t,e){return this.filter(function(r){return r[t]===e})},Array.prototype.firstBy=function(t,e){var r,n,o;for(n=0,o=this.length;o>n;n++)if(r=this[n],r[t]===e)return r},Array.prototype.firstById=function(t){return this.firstBy("id",t)},Array.prototype.findFirstByFn=function(t,e){var r,n,o;for(n=0,o=this.length;o>n;n++)if(r=this[n],e(r)===t)return r},Array.prototype.remove=function(t){var e,r,n,o;for(r=n=0,o=this.length;o>n;r=++n)if(e=this[r],e===t)return this.splice(r,1)},Array.prototype.removeBy=function(t,e){var r,n,o,i;for(n=o=0,i=this.length;i>o;n=++o)if(r=this[n],r[t]===e)return this.splice(n,1)},Array.prototype.removeFirstByFn=function(t,e){var r,n,o,i;for(n=o=0,i=this.length;i>o;n=++o)if(r=this[n],e(r)===t)return this.splice(n,1)},Array.prototype.sortBy=function(t,e,r){var n;return n=function(){var n;return n=r?function(e){return r(e[t])}:function(e){return e[t]},function(t,r){var o,i;return o=n(t),i=n(r),[-1,1][+!!e]*((o>i)-(i>o))}},this.sort(n())},Array.prototype.sortByFn=function(t,e){return this.sort(function(r,n){var o,i;return o=e(r),i=e(n),[-1,1][+!!t]*((o>i)-(i>o))})},Array.prototype.sortByMultiple=function(t){var e,r;return e=function(t,e,r,n){return n=n?1:-1,e[t]>r[t]?-1*n:e[t]<r[t]?1*n:0},r=function(t,r,n){var o,i;return function(){var a,s,u;for(u=[],a=0,s=n.length;s>a;a++)o=n[a],u.push(i=e(o,t,r));return u}()?i:0},this.sort(function(e,n){return r(e,n,t)})},Array.prototype.groupBy=function(t){var e,r,n,o;for(o=new Object,r=0,n=this.length;n>r;r++){if(e=this[r],"undefined"==typeof e[t])throw'AttributeError: Cannot read property "'+t+'" of '+e;o[e[t]]instanceof Array?o[e[t]].push(e):o[e[t]]=[e]}return o},Array.prototype.pluck=function(t){return this.map(function(e){return e[t]})},Array.prototype.sum=function(){return this.reduce(function(t,e){return t+e},0)},Array.prototype.chunk=function(t,e,r){var n,o,i,a,s,u,l,c,f,d,p;if(0===this.length)return this;for(d=t||function(t){return t},o=e||function(t){return t},s=r||function(t,e){return e},i=[],f=[],p=null,l=d(this.first()),a=function(t){return p=d(t),JSON.stringify(p)===JSON.stringify(l)?f.push(o(t)):(i.push(s(l,f)),l=p,f=[o(t)])},u=0,c=this.length;c>u;u++)n=this[u],a(n);return i.push(s(p,f)),i},Array.prototype.sample=function(t){return null==t&&(t=1),this.shuffle().slice(0,+t+1||9e9)},Array.prototype.chunkByN=function(t){var e;return e=this,[].concat.apply([],e.map(function(r,n){return n%t?[]:[e.slice(n,n+t)]}))},Array.prototype.toObj=function(){return this.map(function(t,e){return{n:t,i:e}})},Array.prototype.powerset=function(){var t,r,n,o,i;return 0===this.length?[[]]:(r=this[0],n=2<=this.length?e.call(this,1):[],i=n.powerset(),t=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)o=i[t],n.push([r].concat(o));return n}().concat(i))},Array.prototype.sortedPowerset=function(t){return this.powerset().sortByFn(t,function(t){return t.length})},Array.prototype.flatten=function(){var t,e,r,n;for(e=[],r=0,n=this.length;n>r;r++)t=this[r],"[object Array]"===Object.prototype.toString.call(t)?e=e.concat(flatten(t)):e.push(t);return e}}).call(this),function(){$("#navbar-tools").find("a").each(function(t,e){var r;return r=$(e),r.attr("href")===window.location.pathname?r.remove():void 0}),window.bs={alert:function(t){return $("#alert-modal").unbind(),$('#alert-modal [bind="title"]').text(t.title||dictionary.alert),$('#alert-modal [bind="text"]').text(t.text),$('#alert-modal [bind="confirm"]').text(t.confirm||dictionary.OK),$('#alert-modal [bind="confirm"]').addClass("btn-"+(t.confirm_btn_class||"default")),$("#alert-modal").modal("show"),$.isFunction(t.callback)?$("#alert-modal").on("hide.bs.modal",function(){return t.callback()}):void 0},confirm:function(t){return["#confirm-yes","#confirm-no"].forEach(function(t){return $(t).unbind()}),$('#confirm-modal [bind="title"]').text(t.title||dictionary.confirm),$('#confirm-modal [bind="text"]').text(t.text),$('#confirm-modal [bind="confirm"]').text(t.confirm||dictionary.OK),$('#confirm-modal [bind="cancel"]').text(t.cancel||dictionary.cancel),$('#confirm-modal [bind="confirm"]').addClass("btn-"+(t.confirm_btn_class||"default")),$('#confirm-modal [bind="cancel"]').addClass("btn-"+(t.cancel_btn_class||"default")),$("#confirm-modal").modal("show"),$("#confirm-yes").on("click",function(){return $("#confirm-modal").modal("hide"),$.isFunction(t.callback)?t.callback():void 0}),$("#confirm-no").on("click",function(){return $("#confirm-modal").modal("hide")})},modal:function(t){var e,r,n,o,i,a,s,u,l,c,f,d,p,h;if(s=t.id,$("#"+s+"-modal").remove(),null==s)throw"bs.modal: Need an id";if(l=t.form,h=t.close!==!1?!0:void 0,i=t.header!==!1?!0:void 0,p=t.title,e=t.body||$("#"+s+"-modal-body").html(),o=t.footer||$("#"+s+"-modal-footer").html(),n=t.fade===!0?"fade":"",c="static"===(f=t.backdrop)||f===!0||f===!1?t.backdrop:!0,u=t.keyboard!==!1?!0:void 0,null!=i&&null==p)throw"bs.modal: If a hedear is to be set, a title is required.";return d=t.show||!1,r=t.destroy!==!1?!0:void 0,a="",a+="<div id='"+s+"-modal' class='modal "+n+"'",a+="data-keyboard='"+u+"'",a+="data-backdrop='"+c+"'",a+=">",a+="<div class='modal-dialog'>",a+="<div class='modal-content'>",null!=l&&(a+="<form id='"+s+"-modal-form'>"),null!=i&&(a+="<div class='modal-header'>",null!=h&&(a+="<button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>"),null!=p&&(a+="<h4 class='modal-title'>"+p+"</h4>"),a+="</div>"),null!=e&&(a+="<div class='modal-body'>"+e+"</div>"),null!=o&&(a+="<div class='modal-footer'>"+o+"</div>"),null!=l&&(a+="</form>"),a+="</div>",a+="</div>",a+="</div>",$("#content").append(a),d?$("#"+s+"-modal").modal("show"):void 0},tooltips:function(){return $('[bind="tooltip"]').tooltip({toggle:"tooltip",placement:"auto",delay:{show:150,hide:0}})},popovers:function(){return $('[data-toggle="popover"]').popover({toggle:"popover",html:"true",trigger:"hover",placement:"auto",delay:{show:150,hide:0}})},popovers_on:function(t){return bs.popovers_destroy(t),$(t+" [data-toggle='popover']").popover({toggle:"popover",html:"true",trigger:"hover",placement:"auto",delay:{show:150,hide:0}})},popovers_destroy:function(t){return $(t+" [data-toggle='popover']").popover("destroy")}}}.call(this),function(){Date.prototype.prettyHTML=function(t,e){var r,n,o,i,a;return t=t||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=e||["January","February","Mach","April","May","June","July","August","September","October","November","December"],r=new Date(this.getTime()+6e4*this.getTimezoneOffset()),o=e[r.getMonth()],n=r.getDate()<10?"&nbsp;"+r.getDate():""+r.getDate(),a=r.getFullYear(),i=t[r.getDay()].substr(0,3),"<span style='font-family: monospace'> "+o+" "+n+", "+a+" <span style='color: #aaaaaa'>("+i+")</span> </span>"},Date.prototype.standardDate=function(){var t,e,r;return e=this.getMonth()<9?"0"+(this.getMonth()+1):""+(this.getMonth()+1),t=this.getDate()<10?"0"+this.getDate():""+this.getDate(),r=this.getFullYear(),r+"-"+e+"-"+t},Date.prototype.standardDateTime=function(){var t,e,r,n,o;return n=this.getMonth()<9?"0"+(this.getMonth()+1):""+(this.getMonth()+1),t=this.getDate()<10?"0"+this.getDate():""+this.getDate(),e=this.getHours()<10?"0"+this.getHours():""+this.getHours(),r=this.getMinutes()<10?"0"+this.getMinutes():""+this.getMinutes(),o=this.getFullYear(),o+"-"+n+"-"+t+" "+e+":"+r},Date.prototype.fix_dashes=function(t){return t.replace(/(\d{4})-(\d{2})-(\d{2})/gi,"$1/$2/$3")}}.call(this),function(){null==window.location.getQueryParam&&(window.location.getQueryParam=function(t){var e,r,n;return e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=r.exec(location.search),null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}),window.dictionary={},window.translator=function(t){var e,r,n,o;r=location.getQueryParam("lang")||localStorage.lang||"es",localStorage.lang=r,n=[];for(e in t)o=t[e],n.push(window.dictionary[e]=o[r]);return n},window.base_dictionary={cancel:{es:"Cancelar",en:"Cancel"},alert:{es:"Alerta",en:"Alert"},OK:{es:"OK",en:"OK"},error:{es:"Error",en:"Error"},weekdays:{es:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],en:["January","February","Mach","April","May","June","July","August","September","October","November","December"]},working:{es:"Trabajando...",en:"Working..."},file:{es:"Archivo",en:"File"},line:{es:"Línea",en:"Line"},js_error:{es:"Error de JS",en:"JS error"},js_error_message:{es:"Hubo un error en el navegador, por favor reporta los siguientes datos a un administrador.",en:"This is probably a bug on the browser, report the following details to an administrator."},almost:{es:"Casi",en:"Almost"},done:{es:"¡Listo!",en:"¡Done!"},clear:{es:"Limpiar",en:"Clear"},filetype_error_title:{es:"Tipo de archivo",en:"File type error"},filetype_error_message:{es:"Sólo se pueden subis los siguientes tipos de archivos:",en:"File is not in the accepted file types:"},filesize_error_title:{es:"Tamaño de archivo",en:"File size error"},filesize_error_message:{es:"¡El archivo es demasiado grande! El límite es: ",en:"File is too large! The limit is: "},and:{es:"y",en:"and"}},translator(window.base_dictionary)}.call(this),function(){$.fn.dropdown_matcher=function(t){var e,r,n,o,i,a;return e=this,o=function(e){return t.match_callback?utils.fnRun(t.match_callback,e):e.matches=!0},a=function(e){return t.unmatch_callback?utils.fnRun(t.unmatch_callback,e):e.matches=!1},n=function(e,r){return r.every(function(r){var n;return n=new RegExp(r.regExpEscape(),"i"),t.attributes.some(function(t){return e[t].split(" ").some(function(t){return n.test(t)})})})},r=function(t,e){var n;return t.removeClass("active"),n="up"===e?t.prev():t.next(),0===n.length?!1:n.is(":visible")?n.addClass("active"):r(n,e)},i=function(){return $(t.dropdown+" li").removeClass("active"),$(t.dropdown+" li:visible").first().addClass("active"),$(t.dropdown+" .too-many").hide(),$(t.dropdown+" .no-results").hide()},t.dropdown&&(e.blur(function(e){return setTimeout(function(){return $(t.dropdown).hide()},500)}),e.focus(function(t){return e.trigger("input")}),e.keydown(function(e){var n,o;switch(o=$(t.dropdown+" li.active"),n=o.first(),e.keyCode){case 13:return e.preventDefault(),n.find("a").click();case 38:return e.preventDefault(),0===o.length?$(t.dropdown+" li:visible").last().addClass("active"):r(n,"up");case 40:return e.preventDefault(),0===o.length?$(t.dropdown+" li:visible").first().addClass("active"):r(n,"down")}})),e.keydown(function(t){return 27===t.keycode?($(t.target).val(null),$(t.target).trigger("input")):void 0}),e.bind("input",function(){var r,s,u,l,c,f,d;if(f=e.val(),f.length>=(+t.min_char||1)){if(d=f.split(" "),r=0,t.collection.forEach(function(t){return n(t,d)?(o(t),r+=1):a(t)}),t.dropdown)switch(i(),!1){case 0!==f.length:return t.no_results?$(""+t.no_results).hide():$(".no-results").hide(),t.many_results?$(""+t.many_results).hide():$(".many-results").hide(),$(""+t.dropdown).hide();case!!r:return t.no_results?$(""+t.no_results).show():$(".no-results").show(),t.many_results?$(""+t.many_results).hide():$(".many-results").hide(),$(""+t.dropdown).hide();case!(r>(t.dropdown_size||10)):return t.no_results?$(""+t.no_results).hide():$(".no-results").hide(),t.many_results?$(""+t.many_results).show():$(".many-results").show(),$(""+t.dropdown).hide();default:return t.no_results?$(""+t.no_results).hide():$(".no-results").hide(),t.many_results?$(""+t.many_results).hide():$(".many-results").hide(),$(""+t.dropdown).show()}}else{for(c=t.collection,u=0,l=c.length;l>u;u++)s=c[u],a(s);if(t.dropdown)return i()}})}}.call(this),function(){var t,e,r={}.hasOwnProperty;e=function(t){var e,r,n,o,i;try{i=new String,o=JSON.parse(t);for(n in o)i+=n+": "+o[n]+" <br />";return i}catch(r){return e=r,t}},t=function(t){var e,n;try{return function(){var o,i;o=JSON.parse(t),i=[];for(e in o)r.call(o,e)&&(n=o[e],i.push(n+"<br />"));return i}().join("")}catch(o){return t}},window.flash={css:function(){return console.log("This is a sample CSS for this to look nicely: \n \n [bind='flash'] {\n opacity: 0.9;\n border-radius: 0 !important;\n }\n \n #js-error { margin: 100px !important; }\n \n #api-message-container {\n position: fixed;\n width: 100%;\n margin: auto;\n top: 15px;\n text-align: center;\n z-index: 9999;\n }\n \n #api-message-container > span.alert { padding: 16px; }\n #api-message-container > div.error { margin-top: -16px; }\n")},error:function(t){return $("#api-message-container").append("<div class='error alert alert-danger' bind='flash'><span bind='error-message'>"+t+"</span></div>")},success:function(t){return $('[bind="flash"]').remove(),$("#api-message-container").append("<span class='success alert alert-success' bind='flash'><span bind='message'>"+t+"</span></span>"),$('[bind="flash"]').delay(5e3).fadeOut("fast")},info:function(t){return $("#api-message-container").append("<span class='info alert alert-info' bind='flash'>"+t+"</span>")}},$(document).ajaxStart(function(){return $('[bind="flash"]').remove()}),$(document).ajaxSend(function(){return flash.info(dictionary.working)}),$(document).ajaxSuccess(function(t,e,r){var n;return n=e.getResponseHeader("API-Message"),null!==n&&void 0!==n?flash.success(decodeURIComponent(escape(n))):void 0}),$(document).ajaxError(function(t,r,n,o){return 422===r.status?flash.error(e(r.responseText)):flash.error(e(r.status+": "+e(r.responseText)))}),$(document).ajaxComplete(function(t,e){return $('[bind="flash"].info').remove()}),$(document).on("click","#api-message-container",function(){return $('[bind="flash"]').remove()}),window.onerror=function(t,e,r){return $('[bind="flash"].info').remove(),$("body").prepend("<div id='js-error' class='error alert alert-danger'> <p> <b>"+dictionary.js_error+"</b> "+dictionary.js_error_message+" </p> <p> "+dictionary.error+": "+t+"<br /> "+dictionary.file+":  "+e+"<br /> "+dictionary.line+":  "+r+" </p> </div>"),!1}}.call(this),function(){$.md5=md5,$.fn.toObject=function(t){var e;return null==t&&(t="name"),e=new Object,this.find("["+t+"]").each(function(r,n){var o,i;return o=$(n),i=o.attr(t),e[i]=function(){switch(o.attr("type")){case"password":return $.md5(o.val());case"checkbox":return o.is(":checked");case"number":return+o.val();default:return o.val()}}(),!0}),e},$.fn.fillIn=function(t,e){return null==e&&(e="name"),this.find("input, textarea").each(function(r,n){var o;return o=$(n).attr(e),o&&t[o]?$(n).val(t[o]):void 0}),this}}.call(this),function(){$.fuzzy_matcher=function(t){var e;return $(t.match_text_input).unbind(),e=function(t,r){var n;return t.removeClass("active"),n="up"===r?t.prev():t.next(),0===n.length?!1:n.is(":visible")?n.addClass("active"):e(n,r)},t.dropdown?($(t.match_text_input).focus(function(e){return $(t.match_text_input).trigger("input")}),$(t.match_text_input).keydown(function(r){var n,o;switch(o=$(t.dropdown+" li.active"),n=o.first(),r.keyCode){case 13:return r.preventDefault(),n.find("a").click();case 27:return $(r.target).val(null),$(r.target).trigger("input");case 38:return r.preventDefault(),0===o.length?$(t.dropdown+" li:visible").last().addClass("active"):e(n,"up");case 40:return r.preventDefault(),0===o.length?$(t.dropdown+" li:visible").first().addClass("active"):e(n,"down")}})):$(t.match_text_input).keydown(function(t){return 27===t.keycode?($(t.target).val(null),$(t.target).trigger("input")):void 0}),$(t.match_text_input).bind("input",function(){var e,r,n,o,i,a,s,u,l;return e=!0,a=!0,r=0,s=[],l=[],u=function(t,e){switch(e){case"fuzzy":return new RegExp(t.split("").map(function(t){return t.regExpEscape()}).join(".*?"),"i");case"sub":return new RegExp(""+t.regExpEscape(),"i");case"exact":return new RegExp("^"+t.regExpEscape(),"i")}},n=function(e,r){return""===r[0]?!0:r.every(function(r){var n;return n=u(r,t.search_mode||"fuzzy"),t.search_by_attributes.some(function(t){var o,i;return $.isFunction(t)&&(i=t(e))?(r.toLowerCase()===i.toLowerCase()&&s.push(e),n.test(i)):(o=e[t])?(r.toLowerCase()===o.toLowerCase()&&s.push(e),n.test(o)):!1})})},$.isFunction(t.extra_test)||(t.extra_test=function(t){return!0}),$.isFunction(t.or_test)||(t.or_test=function(t){return!1}),$(t.match_text_input).val().length>(+t.min_char||0)?(o=$(t.match_text_input).val().trim(),i=[o],t.search_in.forEach(function(o){return t.or_test(o)||n(o,i)&&t.extra_test(o)?(utils.fnRun(t.match_callback,o),a=!1,r+=1,l.push(o)):(utils.fnRun(t.unmatch_callback,o),e=!1)}),s.length&&r>+t.max_matches?$.isFunction(t.perfect_callback)?utils.fnRun(t.perfect_callback,r,o,l,s):utils.fnRun(t.many_callback,r,o,l):a?utils.fnRun(t.none_callback,o):r<=+t.max_matches&&(t.auto_show||!e||1===r)?utils.fnRun(t.some_callback,r,o,l):e?utils.fnRun(t.all_callback,r,o,l):r>+t.max_matches?utils.fnRun(t.many_callback,r,o,l):void 0):utils.fnRun(t.all_callback,t.search_in.length,$(t.match_text_input).val(),t.search_in)}),t.auto_trigger?$(t.match_text_input).trigger("input"):void 0}}.call(this),function(){$.each(["put","del"],function(t,e){return $[e]=function(t,r,n,o){return"del"===e&&(e="delete"),$.isFunction(r)&&(o=o||n,n=r,r=void 0),$.ajax({url:t,type:e,dataType:o,data:r,success:n})}})}.call(this),function(){window.location.getQueryParam=function(t){var e,r,n;return e=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=r.exec(location.search),null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},window.location.updateQueryParam=function(t,e){var r,n,o;return o=location.search,r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==o.indexOf("?")?"&":"?",o.match(r)?null===e?o.replace(r,""):o.replace(r,"$1"+t+"="+e+"$2"):""+o+n+t+"="+e}}.call(this),function(){navigator.sayswho=function(){var t,e,r;return r=navigator.userAgent,e=void 0,t=r.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(t[1])?(e=/\brv[ :]+(\d+)/g.exec(r)||[],"IE "+(e[1]||"")):"Chrome"===t[1]&&(e=r.match(/\b(OPR|Edge)\/(\d+)/),null!==e)?e.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=r.match(/version\/(\d+)/i))&&t.splice(1,1,e[1]),t.join(" "))}()}.call(this),function(){Number.prototype.toCurrency=function(){return"$"+this.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},Number.prototype.ms2coloquial=function(){var t,e,r,n,o;return t=864e5,r=this/t,r>356?(o=(r/356).toFixed(1))+(1===o?" year":" years"):r>30?(e=Math.round(r/30))+(1===e?" month":" months"):r>7?(n=Math.round(r/7))+(1===n?" week":" weeks"):Math.round(r)+(1===r?" day":" days")},Number.prototype.digits=function(){return 0===this?1:Math.floor(Math.log10(this)+1)}}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};Object.defineProperty(Object.prototype,"merge",{enumerable:!1,value:function(t){var e,r;for(e in t)r=t[e],this[e]=r;return this}}),Object.defineProperty(Object.prototype,"pick",{enumerable:!1,value:function(t){var e,r,n,o;for(o={},e=0,n=t.length;n>e;e++)r=t[e],o[r]=this[r];return o}}),Object.defineProperty(Object.prototype,"omit",{enumerable:!1,value:function(e){var r,n,o;n={};for(r in this)o=this[r],t.call(e,r)<0&&(n[r]=o);return n}})}.call(this),function(){var t,e,r,n,o=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};r=function(t,e){return localStorage[t+"_version"]===n(e)},n=function(t){return session.versions.filter(function(e){var r;return r=e.n,o.call(t,r)>=0}).map(function(t){return t.f}).reduce(function(t,e){return t+e},0).toString()},window.sync=function(r,n){var o;return o=Date.now(),async.each(r.concat(sync_base),e,function(e){return e?console.log("Sync Error!!"):(console.log("Sync Done! in "+(Date.now()-o)+" ms"),t(),n())})},e=function(t,e){var o,i,a,s,u,l;return u=Date.now(),a=t.name,s=sync_conf[a]&&sync_conf[a].related||t.related||[],l=sync_conf[a]&&sync_conf[a].url||t.url||"/api/"+a,i=sync_conf[a]&&sync_conf[a].fresh||t.fresh||!1,o=sync_conf[a]&&sync_conf[a].data||t.data||{},localStorage[a]&&r(a,s)?(session[a]=$.parseJSON(localStorage[a]),console.log("kept "+a+" in "+(Date.now()-u)+" ms"),e()):$.get(l,o,function(t){return i||(localStorage[a]=t),i||(localStorage[a+"_version"]=n(s)),session[a]=$.parseJSON(t),console.log("got "+a+" in "+(Date.now()-u)+" ms"),e()})},t=function(){var t,e,r,n;r=0,e=function(e){var n;return n=t.length/1024/1024,r+=n};for(n in localStorage)t=localStorage[n],e(n);return console.log("LocalStorage Size = "+r.toFixed(1)+" MB ("+(r/.05).toFixed(1)+"%)")}}.call(this),function(){var t=[].slice;String.prototype.toBoolean=function(){return"true"===this.valueOf()?!0:"false"===this.valueOf()?!1:void 0},String.prototype.closest_in=function(t,e){if(("undefined"==typeof utils||null===utils)&&null==utils.levenshtein)throw Error("utils.levenshtein is not defined");return t.filter(function(t){return function(r){return utils.levenshtein(t,r)<=e}}(this))},String.prototype.capitalise=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.regExpEscape=function(){return this.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},String.prototype.format=function(){var e,r,n,o;for(e=1<=arguments.length?t.call(arguments,0):[],o=this,r=e.length;r;)r-=1,n=new RegExp("\\{"+r+"\\}","gm"),o=o.replace(n,e[r]);return o},String.prototype.camelise=function(){return this.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})},String.prototype.startsWith=function(t){return 0===this.lastIndexOf(t,0)}}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};$.fn.uploadFile=function(e){var r,n,o,i,a,s,u,l,c,f,d,p,h,y,m,g,v,b;if(r=this,d=e.url,f=e.type||"POST",v=e.payload||{},c=e.max_size||4e6,y=e.extensions||[],p=e.extension_error||function(t,e){return bs.alert({title:dictionary.filetype_error_title,text:dictionary.filetype_error_message+" "+e.humanPrint(", ",dictionary.and)})},u=function(t){return null!=e.before&&e.before(t),$("#upload-progress").text("0%"),$("#upload-progress-modal").modal("show")},m=e.progress||function(t){return $("#upload-progress").text(function(){return"100%"===t?dictionary.almost+"...":t})},o=function(t){return null!=e.success&&e.success(t),$("#upload-progress").text(dictionary.done),$("#upload-progress-modal").modal("hide")},n=function(t,r,n){return 413===t.status&&$("#upload-progress").text(dictionary.file_too_large),e.error(t,r,n)},b=e.filesize_error||function(t){return bs.alert({title:dictionary.filesize_error_title,text:dictionary.filesize_error_message+" "+c})},s=new FormData,a=this[0].files[0],i=(a.name||a.fileName).split(".").pop().toLowerCase(),y.length&&t.call(y,i)<0)return p(i,y),!1;if(!a)return!1;h={error:$.noop,success:$.noop,start:$.noop,complete:$.noop},s.append(this.attr("name"),a);for(l in v)g=v[l],s.append(l,g);return $.ajax({type:f,url:d,data:s,cache:!1,contentType:!1,processData:!1,xhr:function(){var t;return t=$.ajaxSettings.xhr(),t.upload.onprogress=function(t){return m((t.loaded/t.total*100>>0)+"%")},t.onloadstart=function(){return h.start.apply(self)},t},beforeSend:function(t){return a.size>c?(t.abort(),b(a.size),!1):(t.setRequestHeader("X-XHR-Upload","1"),t.setRequestHeader("X-File-Name",a.name||a.fileName),t.setRequestHeader("X-File-Size",a.fileSize||a.size),u(t))},error:function(t,e,r){return n(t,e,r)},success:function(t){return o(t)}})}}.call(this),function(){var t,e=[].slice;t={fnRun:function(){var t,r;return r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],"function"==typeof r?r.apply(void 0,t):void 0},levenshtein:function(t,e){var r,n,o,i,a,s,u,l,c,f,d,p,h,y,m,g,v,b;if(s=t.length,u=e.length,0===s)return u;if(0===u)return s;for(r=new Array,n=i=0,p=s;p>=0?p>=i:i>=p;n=p>=0?++i:--i){for(b=[],o=a=0,h=u;h>=0?h>=a:a>=h;o=h>=0?++a:--a)b.push(0);r.push(b)}for(n=l=1,y=s;y>=1?y>=l:l>=y;n=y>=1?++l:--l)r[n][0]=n;for(o=c=1,m=u;m>=1?m>=c:c>=m;o=m>=1?++c:--c)r[0][o]=o;for(o=f=1,g=u;g>=1?g>=f:f>=g;o=g>=1?++f:--f)for(n=d=1,v=s;v>=1?v>=d:d>=v;n=v>=1?++d:--d)t[n-1]===e[o-1]?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o]+1,r[n][o-1]+1,r[n-1][o-1]+1);return r[s][u]},charRange:function(t,e){var r,n,o;for(o=[],n=t.charCodeAt(0),r=e.charCodeAt(0);r>=n;)o.push(String.fromCharCode(n)),++n;return o}},"undefined"!=typeof global&&null!==global&&(global.utils=t),"undefined"!=typeof window&&null!==window&&(window.utils=t)}.call(this);